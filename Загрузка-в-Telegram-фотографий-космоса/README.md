# Космический Телеграм
Скрипты предназначены для скачивания фото космоса и их публикации в Телеграм-чат с помощью бота.
* ``` fetch_spacex_images.py ``` - скачивает фото с ресурсов [SpaceX](https://github.com/r-spacex/SpaceX-API) и публикует в чат одну из них
* ``` fetch_nasa_apod.py ``` - скачивает фото дня (Astronomy Picture of the Day) с ресурсов [NASA](https://api.nasa.gov/#apod) и публикует в чат одну из них
* ``` fetch_nasa_epic.py ``` - скачивает фото c камеры полихроматического изображения Земли (Earth Polychromatic Imaging Cameray) с ресурсов [NASA](https://api.nasa.gov/#epic) и публикует в чат одну из них
* ``` publish_to_telegram.py ``` - публикует фото с указанной ссылки или из файла в чат Телеграм-канала
* ``` automatically_post_telegram.py ``` - автоматическая публикация локально сохраненных фото в Телеграм-канал с заданной периодичностью
* ``` files_from_url_info_and_load.py ``` - общие функции по сохранению изображений и определению имени и типа файла

## Окружение
* Python 3
  
## Зависимости
Все необходимые библиотеки находятся в файле *requirements.txt*.

Если файл находится в той же директории, что и файл скрипта, то для установки воспользуйтесь командой 

  ```  pip install -r requirements.txt ```

Если же в другой папке - необходимо дополнительно прописать путь до файла:

  ``` pip install -r /path/to/requirements.txt ```

## Переменные окружения
В данном скрипте для выполнения запросов используются переменные окружения:

* ```NASA_KEY=*API-token с сайта NASA*```
* ```TELEGRAM_BOT_KEY=*токен чат-бота*```
* ```TELEGRAM_CHAT_ID=*id канала в Телеграм*```
* ```TELEGRAM_PUBLICATION_FREQUENCY=*частота публикаций в часах* ```

### Как получить
1. Для получения API-токена NASA необходимо зарегистрироваться на [сайте NASA](https://api.nasa.gov/). После чего токен придет на указанный e-mail
   ![image](https://github.com/AbrosimovaD/API/assets/114830550/57555619-78e5-444f-91c3-2e90323d317b)
   ![image](https://github.com/AbrosimovaD/API/assets/114830550/ba36462c-4e82-430f-900e-9dcc3242c977)
   ![image](https://github.com/AbrosimovaD/API/assets/114830550/9096a6fc-a16e-431c-b581-a5c8a74ae654)

1. Cоздайте переменную окружения на своём компьютере:
    1. создайте специальный файл ```.env``` рядом с ```main.py```. Поместите в переменную ```NASA_KEY``` полученную строку

        ```NASA_KEY=*API-token с сайта NASA*```
1. Для получения токена чат-бота в Телеграм необходимо написать [боту BotFather](https://t.me/BotFather) и следовать его инструкциям.
   При успешном создании бота его API-токен придет в сообщении
   ![image](https://github.com/AbrosimovaD/API/assets/114830550/f26ac6cd-c306-496d-b11e-7d9e11a8b14e)
   1. в созданный ранее файл ```.env``` создайте переменную

       ```TELEGRAM_CHAT_ID=*id канала в Телеграм*```
1. Создайте Телеграм-канал и добавьте своего бота администратором.
2. Чтобы получить chat_id, напишите [RawDataBot](https://t.me/raw_data_bot) и следуйте его инстукциям
   ![image](https://github.com/AbrosimovaD/API/assets/114830550/571047d8-b6fa-40d7-bcc0-cd040c881d9f)
   1. в созданный ранее файл ```.env``` создайте переменную

      ```TELEGRAM_CHAT_ID=*id канала в Телеграм*```
1. Для автоматической публикации изображений в чате необходимо указать частоту отправки сообщений. Это нужно сделать в переменной окружения

   ```TELEGRAM_PUBLICATION_FREQUENCY=*частота публикаций в часах* ```

## Запуск скрипта
### fetch_spacex_images
Запустить скрипт можно обычным способом. Например, через командную строку:

```  python3 fetch_spacex_images.py  ```
В этом случае скачаются фото *последнего* запуска в папку *image*.
Чтобы скачать изображения с конкретного запуска, необходимо указать его id в параметре ```--launch_id```:

```  python3 fetch_spacex_images.py --launch_id=5eb87d47ffd86e000604b38a```

Чтобы изменить целевую папку для скачивания, необходимо указать ее в параметре ```-p``` или  ```--path_to_load```:

```  python3 fetch_spacex_images.py -p=folder_to_download```

При запуске скрипта в Телеграм-чат публикуется случайная фотография из только что загруженных.

### fetch_nasa_apod
Запустить скрипт можно обычным способом. Например, через командную строку:

```  python3 fetch_nasa_apod.py  ```
В этом случае скачается одно фото запуска в папку *image*.
Чтобы скачать несколько изображений, необходимо указать количество в параметре ```-n``` или  ```--numb```:

```  python3 fetch_nasa_apod.py -n=5```

Чтобы изменить целевую папку для скачивания, необходимо указать ее в параметре ```-p``` или  ```--path_to_load```:

```  python3 fetch_nasa_apod.py -p=folder_to_download```

При запуске скрипта в Телеграм-чат публикуется случайная фотография из только что загруженных.

### fetch_nasa_epic
Запустить скрипт можно обычным способом. Например, через командную строку:

```  python3 fetch_nasa_epic.py  ```
В этом случае скачается одно фото запуска в папку *image*.
Чтобы скачать несколько изображений, необходимо указать количество в параметре ```-n``` или  ```--numb```:

```  python3 fetch_nasa_epic.py -n=5```

Чтобы изменить целевую папку для скачивания, необходимо указать ее в параметре ```-p``` или  ```--path_to_load```:

```  python3 fetch_nasa_epic.py -p=folder_to_download```

При запуске скрипта в Телеграм-чат публикуется случайная фотография из только что загруженных.

### automatically_post_telegram
Запустить скрипт можно обычным способом. Например, через командную строку:

```  python3 automatically_post_telegram.py  ```
В этом случае в Телеграм канал постятся фото из папки *image* с указанной в переменной окружения  ```TELEGRAM_PUBLICATION_FREQUENCY ``` периодичностью.
Чтобы постить фото из другой папки, необходимо указать ее в параметре ```-f``` или  ```--folder_to_post```:

```  python3 fetch_nasa_epic.py --folder_to_post=folder```


## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).


